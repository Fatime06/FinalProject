@using Service.ViewModels.Product
@model IEnumerable<ProductVM>

<section id="collections">
    <div class="collections-header">
        <h2>Collections for you</h2>
        <p>
            Our wines and sparkling wines with the best value for money |
            <a href="#">View All <i class="fa-solid fa-arrow-right"></i></a>
        </p>
    </div>

    <div class="collections-container">

        <div class="collections-products">
            @foreach (var product in Model)
            {
                <div class="collection-card">
                    <img src="~/admin/uploads/products/@product.Image" alt="@product.Name">

                    <div class="info">
                        <h4>@product.Name</h4>

                        <div class="stars">
                            @{
                                int full = (int)product.AverageRating;
                                bool half = product.AverageRating - full >= 0.5;
                            }
                            @for (int i = 0; i < full; i++)
                            {
                                <span>★</span>
                            }
                            @if (half)
                            {
                                <span>★</span>
                            }
                            @for (int i = full + (half ? 1 : 0); i < 5; i++)
                            {
                                <span>☆</span>
                            }
                        </div>

                        <p class="price">
                            @if (product.DiscountPrice != null)
                            {
                                <span class="new">$@product.DiscountPrice</span>
                                <span class="old">$@product.Price</span>
                            }
                            else
                            {
                                <span class="new">$@product.Price</span>
                            }
                        </p>

                        <p class="stock @(product.InStock ? "" : "out")">
                            <i class="fa-solid fa-circle"></i>
                            @(product.InStock ? "In Stock" : "Out of Stock")
                        </p>
                    </div>
                </div>
            }
        </div>

        <div class="collections-banners">

            <div class="banner pink">
                <img src="~/assets/img/Banner6.jpeg" alt="">
                <div class="banner-text">
                    <p>MIX ANY SIX & SAVE</p>
                    <h3>MAJESTIC OFFERS</h3>
                    <span>Tuesday, 12 July 2022 (08 - 12 pm)</span>
                    <button>SHOP NOW</button>
                </div>
            </div>

            <div class="banner dark">
                <img src="~/assets/img/Banner7.jpeg" alt="">
                <div class="banner-text">
                    <p>YOU LOVE WINE?</p>
                    <h3>SAVE UP 30% OFF</h3>
                    <span>Hotline: <b>1-800-888-9999</b></span>
                </div>
            </div>

        </div>
    </div>
</section>
